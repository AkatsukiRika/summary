# 实际遇到的问题

**Kotlin 的范型在编译时会被擦除。有关这种现象，会导致哪些在 Android 开发时容易遇到的问题？如何解决？**

【容易遇到的问题】
1. JSON 反序列化拿不到具体类型：T 或 List<T> 在运行期只剩下 Object 或 List<?>，Retrofit 等转换器如果只传 T::class.java，会把 List<User> 当作 List<Map> 或直接失败
2. is / when 无法判断带实参的集合类型：if (x is List<String>) 会编译警告/被擦除，运行期只能判断是 List
3. Bundle / Intent / SavedStateHandle 里取值需要 Class：API 33+ 的 getParcelable(String, Class<T>) 需要传 Class，自己写的工具方法只有 T 会被擦除

【解决方案】
1. 给库传准确的类型：永远传 Type (TypedToken / Types.newParameterizedType)，不要只传 Class<T>
2. 能写 reified 就写：通用工具方法（如 startActivity<T>()、Bundle.parcelable<T>()、Response.parse<T>()）一律 inline + reified
3. 集合判断：只判外层 + 校验元素，不要写 is List<String>

--------------------------------------------------

**Activity 的四种启动模式**

--------------------------------------------------

**Android 中线程池相关方法有哪些参数，分别是做什么用的**

--------------------------------------------------

**说说对 Handler 的理解**

--------------------------------------------------

**一个自定义 View 的绘制流程分哪些阶段**

--------------------------------------------------

**Android 触摸事件是如何传递的**

# AI 补充的问题